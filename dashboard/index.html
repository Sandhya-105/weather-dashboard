<!--
=========================================================
* Argon Dashboard 2 - v2.0.4
=========================================================

* Product Page: https://www.creative-tim.com/product/argon-dashboard
* Copyright 2022 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)
* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="apple-touch-icon" sizes="76x76" href="./assets/img/apple-icon.png">
	<link rel="icon" type="image/png" href="./assets/img/favicon.png">
	<title>
		Weather Dashboard
	</title>
	<!--     Fonts and icons     -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
	<!-- Nucleo Icons -->
	<link href="./assets/css/nucleo-icons.css" rel="stylesheet" />
	<link href="./assets/css/nucleo-svg.css" rel="stylesheet" />
	<!-- Font Awesome Icons -->
	<script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
	<link href="./assets/css/nucleo-svg.css" rel="stylesheet" />
	<!-- CSS Files -->
	<link id="pagestyle" href="./assets/css/argon-dashboard.css?v=2.0.4" rel="stylesheet" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css">
</head>

<body class="g-sidenav-show   bg-gray-100">
	<div class="min-height-300 bg-primary position-absolute w-100"></div>
	<main class="main-content position-relative border-radius-lg ">
		<!-- End Navbar -->
		<div class="container-fluid py-4">
			<div class="row justify-content-center"> <!--Justify content for horizontal alignment / flex-start:left,flex-end:right-->
				<div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
					<div class="card">
						<div class="card-body p-3">
							<div class="row">
								<div class="col-8">
									<div class="numbers">
										<p class="text-sm mb-0 text-uppercase font-weight-bold">Today's Money</p>
										<h5 class="font-weight-bolder">
											$53,000
										</h5>
										<p class="mb-0">
											<span class="text-success text-sm font-weight-bolder">+55%</span>
											since yesterday
										</p>
									</div>
								</div>
								<div class="col-4 text-end">
									<div
										class="icon icon-shape bg-gradient-primary shadow-primary text-center rounded-circle">
										<i class="ni ni-money-coins text-lg opacity-10" aria-hidden="true"></i>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
					<div class="card">
						<div class="card-body p-3">
							<div class="row">
								<div class="col-8">
									<div class="numbers">
										<p class="text-sm mb-0 text-uppercase font-weight-bold">Today's Users</p>
										<h5 class="font-weight-bolder">
											2,300
										</h5>
										<p class="mb-0">
											<span class="text-success text-sm font-weight-bolder">+3%</span>
											since last week
										</p>
									</div>
								</div>
								<div class="col-4 text-end">
									<div
										class="icon icon-shape bg-gradient-danger shadow-danger text-center rounded-circle">
										<i class="ni ni-world text-lg opacity-10" aria-hidden="true"></i>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
					<div class="card">
						<div class="card-body p-3">
							<div class="row">
								<div class="col-8">
									<div class="numbers">
										<p class="text-sm mb-0 text-uppercase font-weight-bold">New Clients</p>
										<h5 class="font-weight-bolder">
											+3,462
										</h5>
										<p class="mb-0">
											<span class="text-danger text-sm font-weight-bolder">-2%</span>
											since last quarter
										</p>
									</div>
								</div>
								<div class="col-4 text-end">
									<div
										class="icon icon-shape bg-gradient-success shadow-success text-center rounded-circle">
										<i class="ni ni-paper-diploma text-lg opacity-10" aria-hidden="true"></i>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row mt-4">
				<div class="col-lg-7 mb-lg-0 mb-4">
					<div class="card z-index-2 h-100">
						<div class="card-header pb-0 pt-3 bg-transparent">
							<h6 class="text-capitalize">Weather Norway</h6>	
						</div>
						<div class="card-body p-3">
							<div id="main-map" style="height: 400px;"></div> <!--leaflet can be embedded with id and not class-->
						</div>
					</div>
				</div>
				<div class="col-lg-5">
					<div class="card z-index-2 h-100">
						<div class="card-header pb-0 pt-3 bg-transparent">
							<h6 class="text-capitalize">Weather Report</h6>
						</div>
						<div class="card-body p-3">
							<div id="json-response">

							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>

	<!--   Core JS Files   -->
	<script src="./assets/js/core/popper.min.js"></script>
	<script src="./assets/js/core/bootstrap.min.js"></script>
	<script src="./assets/js/plugins/perfect-scrollbar.min.js"></script>
	<script src="./assets/js/plugins/smooth-scrollbar.min.js"></script>
	<!-- Github buttons -->
	<script async defer src="https://buttons.github.io/buttons.js"></script>
	<!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
	<script src="./assets/js/argon-dashboard.min.js?v=2.0.4"></script>
	<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
	<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
	<script>
		const map = L.map('main-map').setView([63.17328405349088, 10.998038564173742], 4);
		const layer = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png',{ attribution: '© OpenStreetMap contributors, © CartoDB'});
		map.addLayer(layer);
		function weather_response(url) {
			return $.ajax(url,{method:'get',cache:false,dataType:'JSON'});//jquery is the lightweight library of js to do the bidding, ajax is a process
		}
		map.on('click', async function(e) { // e for event(click event) you can use any alphabet
			const lat = e.latlng['lat'];
			const lng = e.latlng['lng'];
			const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lng}&current_weather=true&hourly=temperature_2m&hourly=rain&hourly=snowfall`; // string interpolation in js : ${var}
			const response = await weather_response(url) // await makes the program to wait for this statement to run fully without moving on
			$('#json-response').text(JSON.stringify(response.current_weather)) // $('') - selector in jquery and # denotes id, . denotes class
		});
	</script>
</body>


</html>

<!--user <-> ajax(request creator) <-> api <-> database(response)-->
<!-- basic ajax : method, cache, datatype-->
<!-- string interpolation : value of a variable in the desired url-->
<!-- await only works if and only if the function it is inside is also async-->
<!-- html content ah runtime js vechu mathina dom manipulation athuku jquery ooda selector work agthu-->
